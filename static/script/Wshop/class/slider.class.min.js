
define(["jquery","Spinner"],function(b,a){var c={};c.slide=function(e){b(".sliderTip").each(function(){b(this).css("left",(b(this).parent().width()-this.clientWidth)/2)});c.tileWidth=b("body").width();c.tileHeight=b("#slider").height();c.slideNode=b("#slideFrame");c.slideNode.width(100000).height(c.tileHeight);c.touchTabLength=b(".sliderX").length;b(".sliderLoading").height(c.tileWidth);a.spin(b(".sliderLoading").get(0));b("#sliderX img").bind("error",function(){b(this).remove()});b(".sliderX").width(c.tileWidth);if(b("#slider")&&c.touchTabLength>=0){b(".sliderX img").each(function(){b(this).css({width:c.tileWidth});b(this).on("load",function(){b(this).css({width:c.tileWidth,marginTop:((c.tileHeight-b(this).height())/2)+"px"});b(".sliderLoading").hide();a.stop()});if(b(this).height()>0){b(this).css({marginTop:((c.tileHeight-b(this).height())/2)+"px"});b(".sliderLoading").hide();a.stop()}});c.currentTab=0;c.touchX=0;c.touchStartOffsetX=0;c.touchStartX=false;c.touchStartY=false;if(c.touchTabLength>=2){b("#slider").bind({"touchstart mousedown":function(f){c.slideNode.css({transitionDuration:"0",});if(f.originalEvent.touches){f=f.originalEvent.touches[0]}c.touchStartX=f.clientX;c.touchStartY=f.clientY;c.touchEndOffsetX=0},"touchmove mousemove":function(f){if(c.touchStartX&&c.touchStartY){f.preventDefault();if(f.originalEvent.touches){f=f.originalEvent.touches[0]}c.touchX=f.clientX;c.touchY=f.clientY;c.touchEndOffsetX=c.touchStartOffsetX-(c.touchStartX-c.touchX)*0.9;c.slideNode.css("transform","translateX("+c.touchEndOffsetX+"px)")}},"touchend touchcancel mouseup":function(f){if(c.touchX>0){d(Math.abs(c.touchX-c.touchStartX)>=c.tileWidth*0.4?(c.touchX-c.touchStartX)>0:0)}c.touchStartX=false;c.touchStartY=false;f.stopPropagation()}})}}};return c;function d(e){e=e===0?0:(e===true?-1:1);c.currentTab+=e;c.currentTab=c.currentTab<0?0:c.currentTab>(c.touchTabLength-1)?(c.touchTabLength-1):c.currentTab;c.touchStartOffsetX=-c.currentTab*(c.tileWidth);c.slideNode.css({transitionDuration:"200ms",transform:"translateX("+c.touchStartOffsetX+"px)"});b(".sliderTipItems.current").removeClass("current");b(".sliderTipItems").eq(c.currentTab).addClass("current")}});