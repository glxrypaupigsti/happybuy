window.DataTableMuli=false;define(["jquery","Spinner"],function(b,a){var c={};window.Loading=Object.onew({start:function(d){a.spin(b(d).get(0));d=null},finish:function(){a.spin().stop()}});window.wpLoading=function(d){d=d||"#main-mid";Loading.start(d);d=null};c.dataTableLis=function(d,e){var f;d=d||".dTable";e=e||false;if(typeof d==="object"){f=b(d)}else{f=b(d+" tbody tr")}f.unbind("click").click(function(){var h=b(this);if(e){var g=h.find("input:checkbox")[0];if(!DataTableMuli){h.parent().find("tr.click").removeClass("click");h.addClass("click");h.parent().find("input:checked").each(function(){this.checked=false});if(g){g.checked=true}}else{if(b(this).hasClass("click")){b(this).toggleClass("click");if(g){g.checked=false}}else{b(this).addClass("click");if(g){g.checked=true}}}g=null}b(".button.del,.button.edit").css("display","inline-block")}).mouseover(function(){b(this).addClass("hover")}).mouseout(function(){b(this).removeClass("hover")});if(e&&DataTableMuli){if(typeof d!=="object"){b(d+" thead tr .checkAll").unbind("click").click(function(){var g=this;b("tbody tr",b(this).parents("table")).find("input:checkbox").each(function(h,j){j.checked=g.checked});if(g.checked){b("tbody tr",b(this).parents("table")).addClass("click")}else{b("tbody tr",b(this).parents("table")).removeClass("click")}})}}d=null;f=null};window.dataTableLis=c.dataTableLis;c.resize=function(){};c.Alert=function(e,g,f){g=g||false;var d=b('<div id="__alert__"></div>');if(g){d.addClass("warn")}else{d.removeClass("warn")}d.html(e);b("body").append(d);d.css("left",(b("body").width()-d[0].clientWidth)/2+"px").slideDown();window.setTimeout(function(){d.slideUp(300,function(){if(typeof f==="function"){f()}b("#__alert__").remove()})},3000)};c.dataTableLoading=function(d){d=d||".dTable";b("tbody",d).append('<tr class="rmd"><td colspan="6" class="datatableLoading"> </td></tr>')};c.dataTableLoadingEnd=function(e,d){e=e||".dTable";d=d||false;b(".rmd",e).remove();if(!d){scrolling=false}};c.scrollBottom=function(e,d){if(typeof scrolling==="undefined"){scrolling=false}d=d||150;b(window).scroll(function(){totalheight=parseFloat(b(window).height())+parseFloat(b(window).scrollTop())+d;if(b(document).height()<=totalheight&&!scrolling){scrolling=true;e()}})};c.listEmptyTip=function(d){b("body").css("min-height",b(window).height());d=d||"body";b(d).css("position","relative").append('<div class="wshop-empty-tip" onclick="parent.reloadPage();"></div>');d=null};c.removeEmptyTip=function(){b(".wshop-empty-tip").hide()};c.loadOrderStatNums=function(){b.get(shoproot+"?/WdminAjax/ajaxGetOrderStatnums",function(d){var e=b(".cap-nav-item",parent.window.document);e.eq(0).find("b").html("("+d.payed+")");e.eq(1).find("b").html("("+d.delivering+")");e.eq(2).find("b").html("("+d.unpay+")");e.eq(3).find("b").html("("+d.canceled+")");e.eq(4).find("b").html("("+d.all+")")})};c.loadProductStatNums=function(){b.get(shoproot+"?/WdminAjax/ajaxGetProductStatnums",function(d){var e=b(".cap-nav-item",parent.window.document);e.eq(0).find("b").html("("+d.pdcount+")");e.eq(1).find("b").html("("+d.cacount+")");e.eq(2).find("b").html("("+d.spcount+")");e.eq(3).find("b").html("("+d.secount+")");e.eq(4).find("b").html("("+d.pdcount2+")")})};c.loadCompanyStatNums=function(){b.get(shoproot+"?/WdminAjax/ajaxGetCompanyStatNums",function(d){var e=b(".cap-nav-item",parent.window.document);e.eq(0).find("b").html("("+d.count1+")");e.eq(1).find("b").html("("+d.count2+")");e.eq(2).find("b").html("("+d.count3+")")})};c.onresize=function(d){if(typeof d==="function"){b(window).on("resize",d);d()}};c.pdDeleteListen=function(d){b(".pd-del-btn").unbind("click").click(function(){var e=b(this).parent().parent();if(confirm("你确定要删除这个产品吗")){b.post(shoproot+"?/WdminAjax/deleteProduct/",{id:parseInt(b(this).attr("data-product-id"))},function(f){if(parseInt(f)>0){if(d===undefined){location.href=b("#http_referer").val()}else{e.fadeOut("normal",function(){d.row(e).node().remove()})}}else{alert("删除失败")}})}})};return c});Object.onew=function(b){var a=function(c){};a.prototype=b;return new a};